title: Home
path: home
visible: true
icon: mdi:home
type: masonry

badges:

  # Climate Chip
  - type: 'custom:button-card'
    template:
      - 'chip_two_rows_climate'
      - 'chip_navigate_only'
    variables:
      #ulm_chip_temperature_low: sensor.lowest_temperature_home
      #ulm_chip_temperature_high: sensor.highest_temperature_home
      ulm_chip_temperature: sensor.highest_lowest_temperature_home_text  
      ulm_chip_icon_state_entity: sensor.number_of_climate_entities_on
      ulm_chip_navigate_path: /lovelace-wallpanel-tiles/tiles_climate  

  # Presence Chip
  - type: 'custom:button-card'
    template:
      - 'chip_two_rows_presence'
      - 'chip_navigate_only'
    variables:
      ulm_chip_icon_state_entity: sensor.persons_home_counter
      ulm_chip_navigate_path: /lovelace-wallpanel-tiles/tiles_presence

  # Lights Chip
  - type: 'custom:button-card'
    template:
      - 'chip_two_rows_lights'
      - 'chip_navigate_only'
    variables:
      ulm_chip_icon_state_entity: sensor.lights_on_counter
      ulm_chip_navigate_path: /lovelace-wallpanel-tiles/tiles_lights

  # Covers Chip
  - type: 'custom:button-card'
    template:
      - 'chip_two_rows_covers'
      - 'chip_navigate_only'
    variables:
      ulm_chip_icon_state_entity: sensor.covers_open_counter
      ulm_chip_navigate_path: /lovelace-wallpanel-tiles/tiles_covers

  # Media Devices Chip
  - type: 'custom:button-card'
    template:
      - 'chip_two_rows_media'
      - 'chip_navigate_only'
    variables:
      ulm_chip_icon_state_entity: sensor.media_devices_on_counter
      ulm_chip_navigate_path: /lovelace-wallpanel-tiles/tiles_media

  # Motion Chip
  - type: 'custom:button-card'
    template:
      - 'chip_two_rows_motion'
      - 'chip_navigate_only'
    variables:
      ulm_chip_icon_state_entity: sensor.motion_sensors_detected_counter
      ulm_chip_navigate_path: /lovelace-wallpanel-tiles/tiles_security

  # School Day Chip
  - type: 'custom:button-card'
    template:
      - 'chip_school_day'
    variables:
      ulm_chip_icon_state_entity: binary_sensor.school_vacation

  # # Boiler Water Temperature
  # - type: entity
  #   show_name: false
  #   show_state: true
  #   show_icon: true
  #   color: green
  #   icon: mdi:water-boiler
  #   entity: sensor.boiler_temperature
    
  # Red Alert Chip
  # - type: 'custom:button-card'
  #   template:
  #     - 'chip_red_alert'
  #   variables:
  #     ulm_chip_icon_state_entity: binary_sensor.redalert_all
  #     ulm_chip_red_alert_option_1_entity: binary_sensor.redalert_qiryat_gat
  #     ulm_chip_red_alert_option_1_name: "קרית גת"
  #     ulm_chip_red_alert_option_2_entity: binary_sensor.redalert_gan_yavne
  #     ulm_chip_red_alert_option_2_name: "גן יבנה"
  #     ulm_chip_red_alert_option_3_entity: binary_sensor.redalert_bitsron
  #     ulm_chip_red_alert_option_3_name: "ביצרון"
  #     ulm_chip_red_alert_option_4_entity: binary_sensor.redalert_shtulim
  #     ulm_chip_red_alert_option_4_name: "שתולים"
  #     ulm_chip_red_alert_option_5_entity: binary_sensor.redalert_hatsor
  #     ulm_chip_red_alert_option_5_name: "חצור"
  #     ulm_chip_red_alert_option_6_entity: binary_sensor.redalert_ashdod
  #     ulm_chip_red_alert_option_6_name: "אשדוד"

cards:
  
  ############################################################################
  #                                                                          #
  #   First Column                                                           #
  #                                                                          #
  ############################################################################

  - type: horizontal-stack
    cards:

      - type: custom:button-card
        template: card_blank

      - type: vertical-stack 
        cards:

            # General
          - type: custom:button-card
            template: title
            name: "כללי"

          # # Clock
          # - type: custom:button-card
          #   template: card_clock

          # Clock
          - type: custom:digital-clock
            padding: 8px 0
            firstLineFormat: HH:mm
            secondLineFormat: DDDD
            firstLineLayout:
              #textAlign: center
              lineHeight: 1em
              fontSize: 3.8em
              fontWeight: 500
              color: var(--primary-text-color)
            secondLineLayout:
              #textAlign: center
              lineHeight: 1em
              fontSize: 1.6em
              fontWeight: 400
              color: var(--secondary-text-color)

          # Weather
          - type: weather-forecast
            entity: weather.openweathermap #weather.met_home
            forecast_type: daily
            #name: "גן יבנה"            
            show_current: true
            show_forecast: true
            forecast_slots: 5            

          - type: grid
            #title: נוכחות
            square: false
            columns: 2
            cards:
                
              # WiFi
              # - type: 'custom:button-card'
              #   template: card_barcode
              #   name: Guest WiFi
              #   icon: mdi:wifi
              #   variables:
              #     ulm_card_barcode_title: 'Guest WiFi'
              #     ulm_card_barcode_image: image.guest_wifi #'/local/images/wifi_guest.png'
              - type: tile
                entity: image.guest_wifi
                hide_state: true
                vertical: false
                icon_tap_action:
                  action: more-info                  

              # Vacuum Cleaner
              - type: 'custom:button-card'
                template: 
                  - card_vacuum_cleaner
                variables:
                  #ulm_card_vacuum_cleaner_icon: "mdi:waves"
                  ulm_card_vacuum_cleaner_entity: vacuum.l20_ultra
                  ulm_card_vacuum_cleaner_map: camera.l20_ultra_map
                  ulm_card_vacuum_cleaner_translated_state: sensor.vacuum_l20_ultra_translated_state                                 

          #   # Presence
          # - type: custom:button-card
          #   template: title
          #   name: "[[[ return variables.ulm_presence; ]]]"

          # - type: grid
          #   #title: נוכחות
          #   square: false
          #   columns: 2
          #   cards:
          #     # Dima
          #     - type: tile
          #       entity: person.dmatik
          #       show_entity_picture: true

          #     # Galit
          #     - type: tile
          #       entity: person.galit
          #       show_entity_picture: true

          #     # Ronen
          #     - type: tile
          #       entity: person.ronen
          #       show_entity_picture: true

          #     # Kfir
          #     - type: tile
          #       entity: person.kfir
          #       show_entity_picture: true


          # Calendar
          - type: grid
            square: false
            columns: 1
            cards:
            - type: custom:calendar-card-pro 
              entities:
                - calendar.family
              days_to_show: 14
              compact_days_to_show: 14
              compact_events_to_show: 4
              vertical_line_width: 0px
              day_spacing: 6px
              event_spacing: 6px
              day_font_size: 18px
              show_month: false
              event_background_opacity: 0
              time_24h: true
              time_font_size: 14px
              time_icon_size: 16px
              show_location: false
              day_separator_width: 1px
                             

      - type: custom:button-card
        template: card_blank



  ############################################################################
  #                                                                          #
  #   Second Column                                                          #
  #                                                                          #
  ############################################################################

  - type: horizontal-stack
    cards:

      - type: custom:button-card
        template: card_blank

      - type: vertical-stack
        cards:

          # Climate
          - type: custom:button-card
            template: title
            name: "[[[ return variables.ulm_climate; ]]]"           

          - type: grid
            #title: אקלים
            square: false
            columns: 2
            cards:

              # Living Room Climate
              - type: 'custom:button-card'
                template: card_ac_buttons
                variables:
                  ulm_card_ac_entity: climate.living_room
                  ulm_card_ac_curr_temp_sensor: sensor.living_room_temperature_sensor_temperature

              # Bedroom Climate
              - type: 'custom:button-card'
                template: card_ac_buttons
                variables:
                  ulm_card_ac_entity: climate.bedroom
                  ulm_card_ac_curr_temp_sensor: sensor.bedroom_temperature_sensor_temperature

              # Ronen Climate
              - type: 'custom:button-card'
                template: card_ac_buttons
                variables:
                  ulm_card_ac_entity: climate.ronen
                  ulm_card_ac_curr_temp_sensor: sensor.ronen_room_temperature_sensor_temperature

              # Kfir Climate
              - type: 'custom:button-card'
                template: card_ac_buttons
                variables:
                  ulm_card_ac_entity: climate.kfir
                  ulm_card_ac_curr_temp_sensor: sensor.kfir_room_temperature_sensor_temperature   

              # Basement Climate
              - type: 'custom:button-card'
                template: card_ac_buttons
                variables:
                  ulm_card_ac_entity: climate.basement
                  ulm_card_ac_curr_temp_sensor: sensor.basement_temperature_sensor_temperature

              # Back Yard Cover
              - type: tile
                entity: cover.back_yard
                icon_tap_action:
                  action: more-info
                features:
                  - type: "cover-open-close"

              # Living Room Window Cover
              - type: tile
                entity: cover.living_room_window
                icon_tap_action:
                  action: more-info
                features:
                  - type: "cover-open-close"                                     

              # Kitchen Cover
              - type: tile
                entity: cover.kitchen
                icon_tap_action:
                  action: more-info
                features:
                  - type: "cover-open-close"                  


          # Scenes
          - type: custom:button-card
            template: title
            name: "[[[ return variables.ulm_scenes; ]]]"

          - type: grid
            #title: תרחישים
            square: false
            columns: 4
            cards:

              # Basement Lights OFF scene
              - type: 'custom:button-card'
                template: card_scene_vertical
                entity: scene.basement_lights_off
                name: "[[[ return variables.ulm_basement; ]]]"
                label: "[[[ return variables.ulm_lights_off; ]]]"
                icon: mdi:lightbulb-multiple-off
                variables:
                  color: "yellow"
                  x_confirmation_text: "[[[ return variables.ulm_turn_off_basment_lights; ]]]"

              # Main Floor Lights OFF scene
              - type: 'custom:button-card'
                template: card_scene_vertical
                entity: scene.ground_floor_lights_off
                name: "[[[ return variables.ulm_ground; ]]]"
                label: "[[[ return variables.ulm_lights_off; ]]]"
                icon: mdi:lightbulb-multiple-off
                variables:
                  color: "yellow"
                  x_confirmation_text: "[[[ return variables.ulm_turn_off_ground_lights; ]]]"

              # Main Floor Covers
              - type: 'custom:button-card'
                template: card_scene_vertical
                entity: scene.main_floor_covers
                name: "[[[ return variables.ulm_covers; ]]]"
                label: "[[[ return variables.ulm_main; ]]]"
                icon: mdi:window-shutter
                variables:
                  color: "purple"
                  x_confirmation_text: "[[[ return variables.ulm_main_floor_covers; ]]]"

              # Movie time
              - type: 'custom:button-card'
                template: card_scene_vertical
                entity: scene.movie_time
                name: "[[[ return variables.ulm_movie; ]]]"
                label: "[[[ return variables.ulm_scene; ]]]"
                icon: mdi:movie-filter
                variables:
                  color: "blue"
                  x_confirmation_text: "[[[ return variables.ulm_movie_scene; ]]]"



      - type: custom:button-card
        template: card_blank



  ############################################################################
  #                                                                          #
  #   Third Column                                                           #
  #                                                                          #
  ############################################################################

  - type: horizontal-stack
    cards:

      - type: custom:button-card
        template: card_blank

      - type: vertical-stack
        cards:

          # Lights
          - type: custom:button-card
            template: title
            name: "[[[ return variables.ulm_lights; ]]]"           

          - type: grid
            #title: תאורה
            square: false
            columns: 4
            cards:

              # Living Room Light
              - type: tile
                entity: light.living_room
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2

              # Dining Light
              - type: tile
                entity: light.dining
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2                  

              # TV Wall Light
              - type: tile
                entity: light.living_room_tv_wall
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2                  

              # Entrance Light
              - type: tile
                entity: light.entrance
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2                  

              # Guests Bathroom Light
              - type: tile
                name: "שר' אורחים"
                entity: light.guests_bathroom
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2  

              # # Guests Bathroom Light
              # - type: 'custom:button-card'
              #   template: 'card_light_simple'
              #   entity: light.guests_bathroom
              #   #name: "[[[ return variables.ulm_guest_bathroom; ]]]"
              #   variables:
              #     ulm_card_light_counter_sensor: "sensor.guest_bathroom_light_time_left"

              # Kitchen Led Strip
              - type: tile
                name: "לד מטבח"
                entity: light.kitchen_led_strip
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2  

              # # Kitchen Led Strip
              # - type: 'custom:button-card'
              #   template: 'card_light_simple'
              #   entity: light.kitchen_led_strip
              #   icon: 'mdi:led-strip-variant'
              #   name: "[[[ return variables.ulm_kitchen_strip; ]]]"
              #   variables:
              #     ulm_card_light_enable_color: true
              #     ulm_card_light_enable_popup: false
              #     ulm_card_light_counter_sensor: "sensor.kitchen_led_strip_time_left"

              # Kitchen Bar Light
              - type: tile
                entity: light.kitchen_bar
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2                   

              # Back Yard Light
              - type: tile
                entity: light.back_yard
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2                   

              # Hallway Light
              - type: tile
                entity: light.hallway_stairs
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2                                                   

              # Bedroom Light
              - type: tile
                entity: light.bedroom
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2    

              # Bedside Dima Light
              - type: tile
                entity: light.bedside_dima_bulb
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2                                                               

              # Bedside Galit Light
              - type: tile
                entity: light.bedside_galit_bulb
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2                   

              # Ronen Room Light
              - type: tile
                entity: light.ronen_room
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2      

              # # Ronen Led Strip
              # - type: tile
              #   entity: light.ronen_led_strip
              #   tap_action:
              #     action: toggle
              #   hold_action:
              #     action: more-info
              #   double_tap_action:
              #     action: more-info
              #   hide_state: true
              #   vertical: true
              #   grid_options:
              #     columns: 3
              #     rows: 2                                  

              # Kfir Room Light
              - type: tile
                entity: light.kfir_room
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2        

              # # Kfir Led Strip
              # - type: tile
              #   entity: light.kfir_led_strip
              #   tap_action:
              #     action: toggle
              #   hold_action:
              #     action: more-info
              #   double_tap_action:
              #     action: more-info
              #   hide_state: true
              #   vertical: true
              #   grid_options:
              #     columns: 3
              #     rows: 2                                

              # # Stairs Light
              # - type: tile
              #   entity: light.stairs_ground_floor
              #   tap_action:
              #     action: toggle
              #   hold_action:
              #     action: more-info
              #   double_tap_action:
              #     action: more-info
              #   hide_state: true
              #   vertical: true
              #   grid_options:
              #     columns: 3
              #     rows: 2  

              # Basement Light
              - type: tile
                entity: light.basement
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2                   
            
              # Work Room Light
              - type: tile
                entity: light.work_room
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                double_tap_action:
                  action: more-info
                hide_state: true
                vertical: true
                grid_options:
                  columns: 3
                  rows: 2                   

              # # Holidays
              # - type: tile
              #   entity: light.holidays
              #   color: green
              #   tap_action:
              #     action: toggle
              #   hold_action:
              #     action: more-info
              #   double_tap_action:
              #     action: more-info
              #   hide_state: true
              #   vertical: true
              #   grid_options:
              #     columns: 3
              #     rows: 2                   



          # Heating
          - type: custom:button-card
            template: title
            name: "[[[ return variables.ulm_heating; ]]]"

          - type: grid
            #title: חימום
            square: false
            columns: 2
            cards:

              - type: vertical-stack
                cards:

                  # Switcher
                  - type: custom:switcher-boiler-card
                    entity: switch.switcher_touch_d54f
                    icon: ""
                    icon_sensor: sensor.boiler_temperature
                    color_thresholds: true
                    cold_threshold: 35
                    hot_threshold: 55
                    time_left: sensor.switcher_kis_remaining_time_alt
                    sensor_1: sensor.switcher_touch_d54f_current
                    temp_resolution: 0
                    grid_options:
                      columns: 6
                      rows: 2  

                  - type: horizontal-stack
                    cards:

                      # # Bathroom Heater
                      # - type: 'custom:button-card'
                      #   template: 
                      #     - "card_heater_with_timer"
                      #   variables:
                      #     ulm_card_heater_consumption_sensor: sensor.bathroom_heater_power
                      #     ulm_card_heater_counter_sensor: sensor.bathroom_heater_time_left
                      #   entity: switch.bathroom_heater
                      #   name: "[[[ return variables.ulm_bathroom; ]]]"

                      # Bathroom Heater
                      - type: tile
                        entity: switch.bathroom_heater
                        tap_action:
                          action: toggle
                        hold_action:
                          action: more-info
                        double_tap_action:
                          action: more-info
                        hide_state: true
                        vertical: true
                        color: red
                        grid_options:
                          columns: 3
                          rows: 2 

                      # # Parents Bathroom Heater
                      # - type: 'custom:button-card'
                      #   template: 
                      #     - "card_heater_with_timer"
                      #   variables:
                      #     ulm_card_heater_consumption_sensor: sensor.parents_bathroom_heater_power
                      #     ulm_card_heater_counter_sensor: sensor.parents_bathroom_heater_time_left
                      #   entity: switch.parents_bathroom_heater
                      #   name: "[[[ return variables.ulm_parents_bathroom; ]]]"

                      # Parents Bathroom Heater
                      - type: tile
                        entity: switch.parents_bathroom_heater
                        name: "רח' הורים"
                        tap_action:
                          action: toggle
                        hold_action:
                          action: more-info
                        double_tap_action:
                          action: more-info
                        hide_state: true
                        vertical: true
                        color: red
                        grid_options:
                          columns: 3
                          rows: 2        
                              
              # Boiler Temperature
              - type: gauge
                entity: sensor.boiler_temperature
                max: 90
                min: 10
                severity:
                  green: 35
                  yellow: 35
                  red: 55
                needle: true
                grid_options:
                  columns: 6
                  rows: auto   


      - type: custom:button-card
        template: card_blank